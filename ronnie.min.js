/*! ronnie v. 1.0.1 2015-10-01 */
(function(){var a;switch(a={"private":{delay:function(a){return setTimeout(a,0)}},isPromise:function(a){return null!=(null!=a?a.then:void 0)&&"function"==typeof a.then},defer:function(){var b;return b={"private":{chaineds:[],settleChained:function(a,b){return function(){return a.deferred[b.with_operation](b.with_argument)}},settle:function(b){var c,d,e,f,g,h,i,j,k,l;for(k=this.chaineds,l=[],i=0,j=k.length;j>i;i++){g=k[i];try{switch(b.with_operation){case"resolve":e=g.resolve_callback;break;case"reject":e=g.reject_callback}null!=e?(f=e(b.with_argument),a.isPromise(f)?(c=this.settleChained(g,{with_operation:b.with_operation,with_argument:f}),d=this.settleChained(g,{with_operation:"reject",with_argument:f}),l.push(f.then(c,d))):l.push(this.settleChained(g,{with_operation:b.with_operation,with_argument:f})())):l.push(void 0)}catch(m){h=m,l.push(this.settleChained(g,{with_operation:"reject",with_argument:h})())}}return l}},resolve:function(b){var c;return this.promise.settled?void 0:(this.promise.settled=!0,c=this,a["private"].delay(function(){return c["private"].settle({with_operation:"resolve",with_argument:b})}))},reject:function(b){var c;return this.promise.settled?void 0:(this.promise.settled=!0,c=this,a["private"].delay(function(){return c["private"].settle({with_operation:"reject",with_argument:b})}))},promise:{settled:!1,then:function(c,d){var e;return e={deferred:a.defer()},null!=c&&(e.resolve_callback=c),e.reject_callback=null!=d?d:function(a){return a},b["private"].chaineds.push(e),e.deferred.promise},fail:function(a){return this.then(void 0,a)},fin:function(a){return this.then(a,a)}}}},all:function(b){var c,d,e,f,g,h,i,j;for(c=a.defer(),e={values:[],fulfilled:0},h=function(a,d){var f;return e.fulfilled++,f=b.indexOf(a),e.values[f]=d,e.fulfilled===b.length?c.resolve(e.values):void 0},i=function(a){return c.reject(a)},d=function(a){return a.then(function(b){return h(a,b)},i)},f=0,g=b.length;g>f;f++)j=b[f],d(j);return c.promise},any:function(b){var c,d,e,f,g,h,i,j;for(c=a.defer(),j=0,g=function(a){return c.resolve(a)},h=function(){return j++,j===b.length?c.reject(void 0):void 0},d=function(a){return a.then(g,h)},e=0,f=b.length;f>e;e++)i=b[e],d(i);return c.promise}},!1){case null==("undefined"!=typeof module&&null!==module?module.exports:void 0):module.exports=function(){return a};break;case"undefined"==typeof define||null===define:define(function(){return a});break;case"undefined"==typeof window||null===window:window.QLite=a}}).call(this),function(){var a,b=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};a={parse:function(a){var b,c,d,e,f,g;for(a=JSON.parse(a),g=a.modules,e=a.main,b=0,c=g.length;c>b;b++)f=g[b],f.name===e&&(d=f);return{modules:g,main_module:d}},module:function(a,b){var c,d,e;for(c=0,d=a.length;d>c;c++)if(e=a[c],e.name===b)return e},dependencies:function(a,b){var c,d,e,f,g;if(d=[],null!=b.requires)for(g=b.requires,e=0,f=g.length;f>e;e++)c=g[e],d.push(this.module(a,c));return d},errorMessage:function(a){var b,c;return b="Ronnie: ",a.circular_dependency?(b+="Circular Dependency: "+function(){var b,d,e,f;for(e=a.sequence,f=[],b=0,d=e.length;d>b;b++)c=e[b],f.push(c.name+" -> ");return f}().join(""),b.substring(0,b.length-4)):void 0},circularDependenciesCheck:function(a,b){return this.recursiveCircularDependenciesCheck(a,b,[b])},recursiveCircularDependenciesCheck:function(c,d,e){var f,g,h,i,j,k,l,m;for(g=a.dependencies(c,d),m=[],j=0,k=g.length;k>j;j++){if(f=g[j],b.call(e,f)>=0)throw i={circular_dependency:!0,sequence:e.concat([f])},h=new Error(this.errorMessage(i)),h.data=i,h;l=e.concat([f]),m.push(this.recursiveCircularDependenciesCheck(c,f,l))}return m},loadScript:function(a){var b,c;return b=QLite.defer(),c=document.createElement("script"),c.src=a,c.onload=function(){return b.resolve()},document.head.appendChild(c),b.promise},loadModule:function(a){var b,c,d,e,f;for(d=[],e=a.contains,b=0,c=e.length;c>b;b++)f=e[b],d.push(this.loadScript(f));return QLite.all(d)},loadModuleWithDependencies:function(c,d,e){var f,g,h,i,j,k,l;if(f=QLite.defer(),null!=d.requires){for(k=[],l=d.requires,i=0,j=l.length;j>i;i++)h=l[i],g=this.module(c,h),k.push(this.loadModuleWithDependencies(c,g,e));k.length>0&&QLite.all(k).then(function(){return b.call(e,d)>=0?f.resolve():a.loadModule(d).then(function(){return e.push(d),f.resolve()})})}else b.call(e,d)>=0?f.resolve():this.loadModule(d).then(function(){return e.push(d),f.resolve()});return f.promise},loadApp:function(a){var b,c,d;return d=this.parse(a),c=d.modules,b=d.main_module,this.loadModuleWithDependencies(c,b,[])},loadConfig:function(){var a,b,c,d;return b=QLite.defer(),d=document.querySelector("[data-app-config]"),null!=d&&(a=d.getAttribute("data-app-config"),c=new XMLHttpRequest,c.open("GET",a,!0),c.onreadystatechange=function(){return 4===c.readyState&&200===c.status?b.resolve(c.responseText):void 0},c.send()),b.promise},bootstrap:function(){return document.addEventListener("DOMContentLoaded",function(){return a.loadConfig().then(function(b){return a.loadApp(b)})})}},window.Ronnie=a,a.bootstrap()}.call(this);